<script>
  /**
   * @param {number[]} nums
   * @return {number}
   */
  // 子问题：以nums[i]结尾的数组和最大是多少？
  var maxSubArray = function (nums) {
    const len = nums.length;
    if (len === 1) return nums[0];
    let max = preMax = nums[0];
    for (let i = 1; i < len; i++) {
      // preMax < 0, 就是nums[i]
      // nums[i] > 0, 如果preMax < 0,也是nums[i]
      let temMax = nums[i]
      if (preMax > 0) temMax += preMax
      preMax = temMax
      if (max < temMax) max = temMax
    }
    return max;
  };
  console.log(maxSubArray([-2, 1, -3, 4, -1, 2, 1, -5, 4]));
</script>
